<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>README</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>

<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>

<style type="text/css">
div.prism-show-language {
	position: relative;
}

div.prism-show-language > div.prism-show-language-label {
	color: black;
	background-color: #CFCFCF;
	display: inline-block;
	position: absolute;
	bottom: auto;
	left: auto;
	top: 0;
	right: 0;
	width: auto;
	height: auto;
	font-size: 0.9em;
	border-radius: 0 0 0 5px;
	padding: 0 0.5em;
	text-shadow: none;
	z-index: 1;
	-webkit-box-shadow: none;
	-moz-box-shadow: none;
	box-shadow: none;
	-webkit-transform: none;
	-moz-transform: none;
	-ms-transform: none;
	-o-transform: none;
	transform: none;
}
</style>


</head>

<body>

<h1 id="toc_0">ServerlessOps Workshop</h1>

<p><img src="documentation/images/devops.png"/></p>

<h3 id="toc_1"><em>Under develop</em>:</h3>

<hr>

<ul>
<li>[ ] <span style="color:red">Cloud9 - in charge.</span></li>
<li>[ ] <span style="color:red">Front end prettify.</span></li>
<li>[x] <span style="color:red">Front end installation instructions.</span></li>
<li>[x] <span style="color:orange">Adding extra content on testing B/G deployment.</span></li>
<li>[ ] <span style="color:orange">Add extra steps for testing (maybe exercise 2).</span></li>
<li>[ ] <span style="color:orange">Prepare it for customer facing.</span></li>
<li>[ ] <span style="color:orange">Adding another example with API Gateway - Canary.</span></li>
<li>[ ] <span style="color:orange">Recreate images</span></li>
<li>[x] <span style="color:orange">Adding concurrency example.</span></li>
<li>[ ] <span style="color:orange">Multistage pipeline</span></li>
</ul>

<hr>

<p>In this session you will learn the basis of Serverless and the starting set for every developer. We will go through all the steps from local development to continuous delivery using our favourite AWS Serverless Services.</p>

<h2 id="toc_2">Step 1: Introduction - What is Serverless?</h2>

<p><details><summary> Click here to toggle out this section</summary></p>

<p>In this part of the presentation, if the customers know what is serverless, let&#39;s talk about their workloads. <strong>What are they doing/planning to do with Serverless?</strong></p>

<p>Pysical Servers -&gt; Virtual Machines -&gt; Containers -&gt; <strong>Serverless</strong></p>

<p>Serverless computing allows you to build and run applications and services without thinking about servers. Serverless applications don&#39;t require you to provision, scale, and manage any servers. You can build them for virtually any type of application or backend service, and everything required to run and scale your application with high availability is handled for you.</p>

<p>Building serverless applications means that your developers can focus on their core product instead of worrying about managing and operating servers or runtimes, either in the cloud or on-premises. This reduced overhead lets developers reclaim time and energy that can be spent on developing great products which scale and that are reliable.</p>

<ul>
<li>Functions as the unit of scale</li>
<li>Explain Serveless Paradigm is change of mindset.</li>
<li>Serverless is still growing.</li>
</ul>

<h3 id="toc_3">Step 1.2: Services we are going to use:</h3>

<h4 id="toc_4">Step 1.2.1: AWS Lambda</h4>

<p>AWS Lambda is a compute service that lets you run code without provisioning or managing servers. </p>

<ul>
<li>Runs on Amazon Handled Container.</li>
<li>Languages we support</li>
<li>AWS Lambda Ensures function is executed in parallel and at scale</li>
</ul>

<p><strong>Key knowledge bulletpoints:</strong></p>

<ul>
<li>Your code

<ul>
<li>Lamda handler</li>
<li>Uploading code vs. the widget.</li>
</ul></li>
<li>The trigger</li>
<li>Execution Role</li>
<li>Enviromental Variables</li>
<li>Timeout</li>
<li>Memory</li>
<li>VPC</li>
<li>DLQ for failed requests</li>
</ul>

<h4 id="toc_5">Step 1.2.2: Api Gateway</h4>

<p>Amazon API Gateway is a fully managed service that makes it easy for developers to create, publish, maintain, monitor, and secure APIs at any scale.</p>

<ol>
<li>Create a unified API frontend fro multiple microservices</li>
<li>DDoS protection and throttling for backend systems</li>
<li>Authenticate and authorize requests.</li>
<li>Integration with Lambda.</li>
<li>Change the payload.</li>
<li>Custom error codes - Abstract the app layer from the API</li>
<li>Swagger compatible</li>
</ol>

<h4 id="toc_6">Step 1.2.3: SAM - Serverless Application Model</h4>

<p>SAM is an abstraction on CloudFormation</p>

<ul>
<li>New resource types AWS::Serverless::*</li>
<li>Transformed to standard CloudFormation as a ChangeSet</li>
<li>You can mix standard CloudFormation and Serverless resources in the same template</li>
</ul>

<p>SAM makes easier to create applications!</p>

<p>sam validate - validates a Serverless SAM template
sam package - aws cloudformation package
sam deploy - aws cloudformation deploy</p>

<h4 id="toc_7">Step 1.2.4: SAM Local</h4>

<p>Let&#39;s start from the begining! Local development.
SAM Local can be used to test functions locally, start a local API Gateway from a SAM template, validate a SAM template, and generate sample payloads for various event sources.</p>

<h3 id="toc_8">Step 1.3: Install SAM Local -- Section to replace with Cloud9</h3>

<ul>
<li><a href="https://github.com/awslabs/aws-sam-local">https://github.com/awslabs/aws-sam-local</a></li>
<li>Introduce Visual Studio Code as we are going to use it for this session.</li>
</ul>

<h3 id="toc_9">Step 1.4: SAM Local -- Section to replace with Cloud9</h3>

<p><strong>Invoking function with event file:</strong></p>

<p><code>sam local invoke &quot;Ratings&quot; -e event.json</code></p>

<p><strong>Generate sample event source payloads</strong></p>

<p><code>sam local generate-event &lt;service&gt;</code>
<code>sam local generate-event &quot;S3&quot; | sam local invoke &quot;Ratings&quot;</code>
<strong>Run API Gateway locally</strong></p>

<p><code>sam local start-api</code></p>

<p><strong>Debug your Lambda</strong>
Set your configuration on Visual Studio Code:</p>

<div><pre><code class="language-none">{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Attach to SAM Local&quot;,
            &quot;type&quot;: &quot;node&quot;,
            &quot;request&quot;: &quot;attach&quot;,
            &quot;address&quot;: &quot;localhost&quot;,
            &quot;port&quot;: 5858,
            &quot;localRoot&quot;: &quot;${workspaceRoot}/(you-function)&quot;,
            &quot;remoteRoot&quot;: &quot;/var/task&quot;
        }
    ]
}</code></pre></div>

<p>Invoke the Lamda to debug</p>

<div><pre><code class="language-none">sam local invoke -d 5858 &lt;function logical id&gt;
sam local start-api -d 5858</code></pre></div>

<p></details></p>

<h2 id="toc_10">Step 2: Building the Pipeline!</h2>

<h3 id="toc_11">Step 2.1: Create S3 Bucket for deployments.</h3>

<p>Create an S3 bucket where your deployments are going to be uploaded. Use a name such as:</p>

<div><pre><code class="language-none">serverless-ops-my-deployments-&lt;your-alias-here&gt;</code></pre></div>

<p>Within the code, go to <code>template.yaml</code> and change the S3 bucket to the one you have just created.</p>

<h3 id="toc_12">Step 2.2: Create a CodeCommit repository.</h3>

<ol>
<li>Go to the CodeCommit repository and click on <strong>Create Repository</strong></li>
<li>Enter a repository name such as <strong>ServerlessOps_Repository</strong></li>
<li>Skip Configure email notifications&#39; step.</li>
<li>Follow the steps provided by CodeCommit to <strong>Connect to your repository</strong></li>
<li>Copy the content of the folder <strong>ServerlessOps_workshop</strong> to the recently created <strong>ServerlessOps_Repository</strong></li>
<li>Run these commands to perform the inital commit:</li>
</ol>

<div><pre><code class="language-bash">git add -A
git commit -m &quot;initial commit&quot;
git push</code></pre></div>

<p>Now your code is CodeCommit and you start building your pipeline.</p>

<h5 id="toc_13">Note: The <em>yaml</em> template - SAM!</h5>

<p>The folder with the code has the following tree:</p>

<div><pre><code class="language-none">├── README.md
├── *buildspec.yml*
├── documentation
│   └── images
│       └── ...
├── frontend
│   ├── assets
│   │   └── ...
│   ├── front-js
│   │   ├── assets.js
│   │   └── ...
│   ├── *index.html*
│   └── ...
├── functions
│   ├── getinfo
│   │   └── *index.js*
│   └── getinfoenhanced
│       └── *index.js*
├── old
│   └── ...
├── swagger.yaml
└── *template.yaml*</code></pre></div>

<p>The important files here are represented by *name of the file *.</p>

<p>The SAM template is called <strong>template.yaml</strong> and has two resources:
1. An API
2. A function</p>

<p>The function has an API method defined in the API as the event trigger. This method is define in the file <strong>swagger.yaml</strong> as well as some other features such as CORS.</p>

<p>During this Lab we will modify the function <strong><q>getinfo</q></strong> with the code within <strong><q>getinfoenhanced</q></strong> to demonstrate how can propagate a change within the pipeline and deploy it in a Blue/Green matter.</p>

<h2 id="toc_14">Step 2.3: Creating the pipeline with CodePipeline</h2>

<p>Before you start, change the file <code>buildspec.yml</code> to add your alias in the command.</p>

<ol>
<li>Go to the CodePipeline console and click on <strong>Get Started</strong></li>
<li>Create a Pipeline with the name <strong>ServerlessOps_pipeline</strong> and click on next step.</li>
</ol>

<p><img src="documentation/images/codepipeline1.png" /></p>

<h3 id="toc_15">Step 2.3.1 Create the source of your pipeline.</h3>

<ol>
<li>Drop down the service provider and select <strong>CodeCommit</strong>.</li>
<li>Look for the repository name created previously and select it.</li>
<li>Select the Branch name <strong>master</strong>.</li>
</ol>

<p><img src="documentation/images/codepipeline2.png" /></p>

<p>After defining our source, we will chose <strong>CodeBuild</strong> as our build provider. Click on Next Step.</p>

<h3 id="toc_16">Step 2.3.2: How to create a CodeBuild project for your serveless pipeline</h3>

<p>Here we are going to select the build provider. In this case, we will use CodeBuild.</p>

<p>In the phase of creating a build project, we select <q>Create a new build project</q>.</p>

<p>Within the project, the file buildspec.yml has the information necesary for your deployments. If we inspect this file, we will find that the deployment generages a file calles SAM-template.yaml which replaces the <q>local code</q> with a file within the S3 bucket previously provided.</p>

<ol>
<li>Name it as <em>ServerlessOps_build</em>.</li>
<li>Select <em>Use an image managed by AWs CodeBuild</em>.</li>
<li>Chose <em>Ubuntu</em> as the Operating system.</li>
<li>Select <em>Node.js</em> as the runtime.</li>
<li>Select Version <em>4.3.2</em>.</li>
<li>Select <em>Create a service role in your account</em>. We will review it after creating the pipeline.</li>
<li>Click on <em>Save build project</em></li>
</ol>

<p><img src="documentation/images/codepipeline3.png" /></p>

<h3 id="toc_17">Step 2.3.3: Select the deploy phase using CloudFormation.</h3>

<p>Click on Next Step once you have created your build project. Altough SAM (behind the scenes) will use CodeDeploy, SAM is based in CloudFormation and the deploy will do it as well.</p>

<ol>
<li>Select <em>CloudFormation</em> as the deployment provider.</li>
<li>Chose <em>Change or replace a change set</em> as the Action Mode.</li>
<li>Name the Stack <strong>ServerlessOps-stack</strong></li>
<li>Name the Change set as <strong>ServerlessOps-changeset</strong></li>
<li>The template file that CodeBuild generates is <em>SAM-template.yaml</em>. Set it under Template file.</li>
<li>Select Capabilities <em>CAPABILITIES_IAM</em></li>
<li>This is the role assumed by CloudFormation to deploy your code. For the shake of this training, we will use Administration permissions. Please bare in mind that these permissions should be the ones used by your stack (such as creating an API, Lambda Function, S3...). <em>Create/use an IAM role for CloudFormation with Administrator permissions</em>.</li>
<li>In the next step we will <em>define the role used by CodePipeline</em> to access resources such as CodeBuild, CodeCommit, S3... If you have created a role previously, you can use it, if not click on Create role. By allowing the default policy, it will create a role called <em>AWS-CodePipeline-Service</em>. Then, click <em>Next Step</em>.</li>
<li>Review the configuration and create the pipeline.
<img src="documentation/images/codepipeline4.png" /></li>
</ol>

<h3 id="toc_18">Step 2.3.4: Review the CodeBuild IAM role to add S3 Permissions.</h3>

<p>The IAM role created by CodeBuild doesn&#39;t have the specific permissions for the instruction needed on it&#39;s buildspec.yml:</p>

<div><pre><code class="language-none">aws cloudformation package --template-file template.yaml --s3-bucket  serverless-ops-my-deployments-&lt;your-alias&gt; --output-template-file SAM-template.yaml</code></pre></div>

<p>After creating the pipeline, you will see that it fails during the build phase due to a permissions issue. We need to add these permissions (S3).</p>

<ol>
<li>Go to the IAM Console and look for the role.</li>
<li>Attach an S3 administator policy to this role.</li>
</ol>

<p><details><summary>CodeBuild Role:</summary></p>

<div><pre><code class="language-JSON">{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [
                &quot;arn:aws:logs:us-east-1:012345678901:log-group:/aws/codebuild/from-sam-to-aws&quot;,
                &quot;arn:aws:logs:us-east-1:012345678901:log-group:/aws/codebuild/from-sam-to-aws:*&quot;
            ],
            &quot;Action&quot;: [
                &quot;logs:CreateLogGroup&quot;,
                &quot;logs:CreateLogStream&quot;,
                &quot;logs:PutLogEvents&quot;
            ]
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Resource&quot;: [
                &quot;arn:aws:s3:::codepipeline-us-east-1-*&quot;
            ],
            &quot;Action&quot;: [
                &quot;s3:PutObject&quot;,
                &quot;s3:GetObject&quot;,
                &quot;s3:GetObjectVersion&quot;
            ]
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: &quot;s3:*&quot;,
            &quot;Resource&quot;: &quot;arn:aws:s3::012345678901:nameofyourbucket&quot;
        },
        {
            &quot;Effect&quot;: &quot;Allow&quot;,
            &quot;Action&quot;: [
                &quot;ssm:GetParameters&quot;
            ],
            &quot;Resource&quot;: &quot;arn:aws:ssm:us-east-1:012345678901:parameter/CodeBuild/*&quot;
        }
    ]
}</code></pre></div>

<p></details></p>

<h2 id="toc_19"> Step 3: The front end.</h2>

<p>In order to make this web page available for every customer, we will have to upload it to S3. </p>

<h3 id="toc_20">Step 3.1: Prepare the front-end.</h3>

<p>The first step is to modify the javascript to point to the API created by your pipeline and the image to review. </p>

<ol>
<li>Go to the AWS API Gateway console.</li>
<li>Select the API <em>ServerlessOps-api</em>.</li>
<li>Under Stages, select <em>Prod</em>.</li>
<li>Copy the Invoke URL presented there.</li>
<li><p>Open the file under the project tree: </p>

<div><pre><code class="language-none">ServerlessOps &gt; frontend &gt; front-js &gt; assets.js</code></pre></div></li>
<li><p>Change the variable api with the URL copied before.</p></li>
<li><p>Change the bucket name and confirm the image. (the image should be in the same bucket as the front-end).</p></li>
</ol>

<p>Now we should be able to open the application locally by opening the file:</p>

<div><pre><code class="language-none">ServerlessOps &gt; frontend &gt; index.html</code></pre></div>

<h3 id="toc_21">Step 3.2: Upload the front-end.</h3>

<p>Now, let&#39;s upload this content to S3.</p>

<ol>
<li><p>Create bucket called:</p>

<div><pre><code class="language-none">serverless-ops-frontend-&lt;your-alias&gt;</code></pre></div></li>
<li><p>Upload all the content within the folder <em>frontend</em>.</p></li>
</ol>

<p>Configure your bucket for Website hosting by following these 3 simple steps in our documentation:</p>

<ul>
<li><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html">https://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html</a></li>
</ul>

<p>Now, go to your application and test it!</p>

<h2 id="toc_22">Step 4: Update your code to force a release!</h2>

<p>Let&#39;s make our first release. We could simply use a release change within the pipeline console but, in order to demonstrate the automation, we will do it directly from the console/git command:</p>

<ol>
<li><p>Run the following git commands:</p>

<div><pre><code class="language-none">git add -A
git commit -m &quot;My first commit! - ServerlessOps&quot;
git push</code></pre></div></li>
<li><p>Go back to the CodePipeline Console to see the release.</p></li>
</ol>

<p>The code will stop at staging, yet the Pipeline won&#39;t have generated any resources such as APIs, Lambdas... Why? Because the Pipeline should have generated a ChangeSet. You can go to CloudFormation, select the stack and execute the change set.</p>

<p>A final stage should be added to the pipeline. ExecuteChangeSet is required.</p>

<ol>
<li>On the CodePipeline console, click on <em>Edit</em>.</li>
<li>At the bottom of your pipeline, click on the icon <em>+ Stage</em>.</li>
<li>Enter a stage name like <em>ExecuteChangeSet</em>.</li>
<li>Click on Action.</li>
<li>Under Action Category, select <em>Deploy</em>.</li>
<li>Name the action <em>ExecuteChangeSet</em>.</li>
<li>The deployment provider will be CloudFormation.</li>
<li>Under Action mode, select <em>Execute a change set</em>.</li>
<li>Select the stack and the Change set name.</li>
<li>Save the Stage and click on <em>Save pipeline changes</em>.</li>
</ol>

<p>Now, it&#39;s time to make a change. Our web application is clearly incomplete! We need to find out the celebrities in our photo!</p>

<p>To do this, we need to change the code behind this file:</p>

<div><pre><code class="language-none"> functions/getinfo/index.js</code></pre></div>

<p>With the content within</p>

<div><pre><code class="language-none">functions/getinfoenhanced/index.js</code></pre></div>

<p>After doing it, we need to commit these changes. Use the previously mentioned git commands to push the code to git commit:</p>

<div><pre><code class="language-none">git add -A
git commit -m &quot;Adding celebrities to the result.&quot;
git push</code></pre></div>

<h2 id="toc_23"> Step 5: Let&#39;s review our deployment!</h2>

<p>Now that we have made a change on our code it should be reflected on the result. But wait... Does it? No! We are B/G deploying it! Follow these steps:</p>

<ol>
<li>Go to CodeDeploy and select the deployment that starts with ServerlessOps-stack.</li>
<li>Under status, you should see an identifies starting with <q>d-</q>. Click it.</li>
</ol>

<p><img src="documentation/images/codedeploy.png" /></p>

<p>We are shifting traffic 10% each minute! This has been done using 3 lines on sam:</p>

<div><pre><code class="language-none">AutoPublishAlias: live
      DeploymentPreference:
        Type: Linear10PercentEvery1Minute</code></pre></div>

<p>You can run tests against the application to find see the different requests.</p>

<h2 id="toc_24"> Step 6: Set concurrency in your Lambda Function.</h2>

<p>AWS Lambda limits your concurrency to 1000 concurrent executions within one region. Of course, these limits can be updated by requesting a limit increase to our support team. However, it is always a good idea to limit your functions to certain amount of concurrent executions. </p>

<p>Let&#39;s put an example: We have our own environment with several developers pushing code and testing lambda functions. We are deeply into Serverless! Some of these functions are just for testing purposes but one of our developers is doing a load test to see how does it react to heavy load. Because of this, his tesing lambda function is taking 900 concurrent executions letting only 100 left for the rest of your Lambda functions. Luckily, you followed the best practices and split testing and production in two different accounts so this is not impacting your production environment but, of course, the rest of the developers are seeing 429 in the Lambda execution whenever they trigger their functions. You got several angry developers! How can we avoid this?</p>

<p>Another use case would be to <q>reserve</q> capacity for our Lambda function so other executions won&#39;t take it.</p>

<p>For the purpose of this workshop, we are going to limit the concurrency of our function to 25. You probably noticed in the code that there is <q>wait</q> of 3000 seconds.</p>

<div><pre><code class="language-JAVASCRIPT">setTimeout(function(){...
},3000);</code></pre></div>

<p>This has been made on purpose to force your Lambda function to have concurrent executions.</p>

<p>Let&#39;s test our Lambda Function without concurrency. To do it, we recommend you to use an EC2 instance so you can install hey easily.</p>

<div><pre><code class="language-bash">## If you don&#39;t have go installed:
sudo yum install go -y
## mac with brew
brew install go
##

go get -u github.com/rakyll/hey

./go/bin/hey -n 1000 -c 50 \
-d &#39;{ &quot;bucket&quot;: &quot;serverless-ops-frontend-&lt;your-alias-here&gt;&quot;,&quot;key&quot;: &quot;someguy.jpg&quot;}&#39; \ 
-H &#39;Content-Type: application/json&#39; -m POST https://&lt;your-api-endpoint&gt;/Prod/getinfo</code></pre></div>

<p>At this point, this code should have been released. Let&#39;s manually set the concurrency for our Lambda Function.</p>

<ol>
<li>Go to the Lambda Console.</li>
<li>Select the Lambda Function deployed by our SAM template (starts with <em>ServerlessOps-stack-LambdaFunction-)</em>.</li>
<li>Under Configuration tab, set the concurrency to 25.</li>
</ol>

<p><img src="documentation/images/lambda-concurrency.png" alt="Add concurrency">
4. Save the function.</p>

<p>It is important to understand that this concurrency is shared between all the aliases and versions of this function. Lambda concurrency is function based.</p>

<p>To test this concurrency, let&#39;s go to our terminal and run the previous command command.</p>

<div><pre><code class="language-bash">./go/bin/hey -n 1000 -c 50 \
-d &#39;{ &quot;bucket&quot;: &quot;serverless-ops-frontend-&lt;your-alias-here&gt;&quot;,&quot;key&quot;: &quot;someguy.jpg&quot;}&#39; \ 
-H &#39;Content-Type: application/json&#39; -m POST https://&lt;your-api-endpoint&gt;/Prod/getinfo</code></pre></div>

<p>You will definitely see something like this:</p>

<div><pre><code class="language-bash">Response time histogram:
  0.083 [1] |
  1.548 [500]   |∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
  3.012 [0] |
  4.476 [457]   |∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎∎
  5.941 [15]    |∎
  7.405 [5] |
  8.869 [1] |
  10.334 [0]    |
  11.798 [0]    |
  13.262 [3]    |
  14.727 [18]   |∎
  
  ...
  Status code distribution:
  [502] 501 responses
  [200] 499 responses</code></pre></div>

<p>As we can see here, the 502&#39;s responses has increased! </p>



<script type="text/javascript">
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var l=r[e];if(2==arguments.length){a=arguments[1];for(var i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==t)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);o[s]=l[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var l in e)e.hasOwnProperty(l)&&(t.call(e,l,e[l],a||l),"Object"!==n.util.type(e[l])||r[n.util.objId(e[l])]?"Array"!==n.util.type(e[l])||r[n.util.objId(e[l])]||(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,l,r)):(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",a);for(var r,l=a.elements||document.querySelectorAll(a.selector),i=0;r=l[i++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var l,i,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1],i=n.languages[l]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var s=t.textContent,u={element:t,language:l,grammar:i,code:s};if(!s||!i)return n.hooks.run("complete",u),void 0;if(n.hooks.run("before-highlight",u),a&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,r){var l=n.tokenize(e,t);return a.stringify(n.util.encode(l),r)},tokenize:function(e,t){var a=n.Token,r=[e],l=t.rest;if(l){for(var i in l)t[i]=l[i];delete t.rest}e:for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var o=t[i];o="Array"===n.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],c=u.inside,g=!!u.lookbehind,h=!!u.greedy,f=0,d=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var m=r[p];if(r.length>e.length)break e;if(!(m instanceof a)){u.lastIndex=0;var y=u.exec(m),v=1;if(!y&&h&&p!=r.length-1){var b=r[p+1].matchedStr||r[p+1],k=m+b;if(p<r.length-2&&(k+=r[p+2].matchedStr||r[p+2]),u.lastIndex=0,y=u.exec(k),!y)continue;var w=y.index+(g?y[1].length:0);if(w>=m.length)continue;var _=y.index+y[0].length,P=m.length+b.length;if(v=3,P>=_){if(r[p+1].greedy)continue;v=2,k=k.slice(0,P)}m=k}if(y){g&&(f=y[1].length);var w=y.index+f,y=y[0].slice(f),_=w+y.length,S=m.slice(0,w),O=m.slice(_),j=[p,v];S&&j.push(S);var A=new a(i,c?n.tokenize(y,c):y,d,y,h);j.push(A),O&&j.push(O),Array.prototype.splice.apply(r,j)}}}}}return r},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,l=0;r=a[l++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.matchedStr=a||null,this.greedy=!!r};if(a.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join("");var l={type:e.type,content:a.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==l.type&&(l.attributes.spellcheck="true"),e.alias){var i="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}n.hooks.run("wrap",l);var o="";for(var s in l.attributes)o+=(o?" ":"")+s+'="'+(l.attributes[s]||"")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'" '+o+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,l=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),l&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
</script>

<script type="text/javascript">
!function(e){var t={variable:[{pattern:/\$?\(\([\w\W]+?\)\)/,inside:{variable:[{pattern:/(^\$\(\([\w\W]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b-?(?:0x[\dA-Fa-f]+|\d*\.?\d+(?:[Ee]-?\d+)?)\b/,operator:/--?|-=|\+\+?|\+=|!=?|~|\*\*?|\*=|\/=?|%=?|<<=?|>>=?|<=?|>=?|==?|&&?|&=|\^=?|\|\|?|\|=|\?|:/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\([^)]+\)|`[^`]+`/,inside:{variable:/^\$\(|^`|\)$|`$/}},/\$(?:[a-z0-9_#\?\*!@]+|\{[^}]+\})/i]};e.languages.bash={shebang:{pattern:/^#!\s*\/bin\/bash|^#!\s*\/bin\/sh/,alias:"important"},comment:{pattern:/(^|[^"{\\])#.*/,lookbehind:!0},string:[{pattern:/((?:^|[^<])<<\s*)(?:"|')?(\w+?)(?:"|')?\s*\r?\n(?:[\s\S])*?\r?\n\2/g,lookbehind:!0,inside:t},{pattern:/(["'])(?:\\\\|\\?[^\\])*?\1/g,inside:t}],variable:t.variable,"function":{pattern:/(^|\s|;|\||&)(?:alias|apropos|apt-get|aptitude|aspell|awk|basename|bash|bc|bg|builtin|bzip2|cal|cat|cd|cfdisk|chgrp|chmod|chown|chroot|chkconfig|cksum|clear|cmp|comm|command|cp|cron|crontab|csplit|cut|date|dc|dd|ddrescue|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|du|egrep|eject|enable|env|ethtool|eval|exec|expand|expect|export|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|getopts|git|grep|groupadd|groupdel|groupmod|groups|gzip|hash|head|help|hg|history|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|jobs|join|kill|killall|less|link|ln|locate|logname|logout|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|make|man|mkdir|mkfifo|mkisofs|mknod|more|most|mount|mtools|mtr|mv|mmv|nano|netstat|nice|nl|nohup|notify-send|nslookup|open|op|passwd|paste|pathchk|ping|pkill|popd|pr|printcap|printenv|printf|ps|pushd|pv|pwd|quota|quotacheck|quotactl|ram|rar|rcp|read|readarray|readonly|reboot|rename|renice|remsync|rev|rm|rmdir|rsync|screen|scp|sdiff|sed|seq|service|sftp|shift|shopt|shutdown|sleep|slocate|sort|source|split|ssh|stat|strace|su|sudo|sum|suspend|sync|tail|tar|tee|test|time|timeout|times|touch|top|traceroute|trap|tr|tsort|tty|type|ulimit|umask|umount|unalias|uname|unexpand|uniq|units|unrar|unshar|uptime|useradd|userdel|usermod|users|uuencode|uudecode|v|vdir|vi|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yes|zip)(?=$|\s|;|\||&)/,lookbehind:!0},keyword:{pattern:/(^|\s|;|\||&)(?:let|:|\.|if|then|else|elif|fi|for|break|continue|while|in|case|function|select|do|done|until|echo|exit|return|set|declare)(?=$|\s|;|\||&)/,lookbehind:!0},"boolean":{pattern:/(^|\s|;|\||&)(?:true|false)(?=$|\s|;|\||&)/,lookbehind:!0},operator:/&&?|\|\|?|==?|!=?|<<<?|>>|<=?|>=?|=~/,punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];]/};var a=t.variable[1].inside;a["function"]=e.languages.bash["function"],a.keyword=e.languages.bash.keyword,a.boolean=e.languages.bash.boolean,a.operator=e.languages.bash.operator,a.punctuation=e.languages.bash.punctuation}(Prism);
</script>

<script type="text/javascript">
Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript;
</script>

<script type="text/javascript">
Prism.languages.json={property:/".*?"(?=\s*:)/gi,string:/"(?!:)(\\?[^"])*?"(?!:)/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,punctuation:/[{}[\]);,]/g,operator:/:/g,"boolean":/\b(true|false)\b/gi,"null":/\bnull\b/gi},Prism.languages.jsonp=Prism.languages.json;
</script>

<script type="text/javascript">
!function(){if("undefined"!=typeof self&&self.Prism&&self.document){var e={html:"HTML",xml:"XML",svg:"SVG",mathml:"MathML",css:"CSS",clike:"C-like",javascript:"JavaScript",abap:"ABAP",actionscript:"ActionScript",apacheconf:"Apache Configuration",apl:"APL",applescript:"AppleScript",asciidoc:"AsciiDoc",aspnet:"ASP.NET (C#)",autoit:"AutoIt",autohotkey:"AutoHotkey",basic:"BASIC",csharp:"C#",cpp:"C++",coffeescript:"CoffeeScript","css-extras":"CSS Extras",fsharp:"F#",glsl:"GLSL",http:"HTTP",inform7:"Inform 7",json:"JSON",latex:"LaTeX",lolcode:"LOLCODE",matlab:"MATLAB",mel:"MEL",nasm:"NASM",nginx:"nginx",nsis:"NSIS",objectivec:"Objective-C",ocaml:"OCaml",parigp:"PARI/GP",php:"PHP","php-extras":"PHP Extras",powershell:"PowerShell",jsx:"React JSX",rest:"reST (reStructuredText)",sas:"SAS",sass:"Sass (Sass)",scss:"Sass (Scss)",sql:"SQL",typescript:"TypeScript",vhdl:"VHDL",vim:"vim",wiki:"Wiki markup",yaml:"YAML"};Prism.hooks.add("before-highlight",function(s){var a=s.element.parentNode;if(a&&/pre/i.test(a.nodeName)){var t,i,r=a.getAttribute("data-language")||e[s.language]||s.language.substring(0,1).toUpperCase()+s.language.substring(1),l=a.previousSibling;l&&/\s*\bprism-show-language\b\s*/.test(l.className)&&l.firstChild&&/\s*\bprism-show-language-label\b\s*/.test(l.firstChild.className)?i=l.firstChild:(t=document.createElement("div"),i=document.createElement("div"),i.className="prism-show-language-label",t.className="prism-show-language",t.appendChild(i),a.parentNode.insertBefore(t,a)),i.innerHTML=r}})}}();
</script>


</body>

</html>
